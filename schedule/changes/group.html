<script>
const params = new URLSearchParams(location.search);
const group = params.get("group");

const container = document.getElementById("content");
const title = document.getElementById("title");
const dateEl = document.getElementById("date");

if (!group || !window.CHANGES || !CHANGES[group]) {
  title.textContent = "Изменений нет";
  dateEl.textContent = "Для данной группы изменений не найдено.";
} else {
  const data = CHANGES[group];

  title.textContent = `Изменения · ${group} группа`;
  dateEl.textContent = data.date || "";

  const section = document.createElement("section");
  section.className = "day";
  section.style.marginTop = "20px";

  const h2 = document.createElement("h2");
  h2.textContent = "Изменения";
  section.appendChild(h2);

  const wrap = document.createElement("div");
  wrap.className = "glass table-wrap";

  const table = document.createElement("table");
  table.innerHTML = `
    <thead>
      <tr>
        <th>№</th>
        <th>Время</th>
        <th>Дисциплина</th>
        <th>Ауд.</th>
      </tr>
    </thead>
    <tbody></tbody>
  `;

  const tbody = table.querySelector("tbody");

  data.rows.forEach(r => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td data-label="№">${r[0]}</td>
      <td data-label="Время">${r[1]}</td>
      <td data-label="Дисциплина">${r[2]}</td>
      <td data-label="Ауд.">${r[3]}</td>
    `;
    tbody.appendChild(tr);
  });

  wrap.appendChild(table);
  section.appendChild(wrap);
  container.appendChild(section);
}
</script>
